## RUN MONGO ON CMD

use mongosh

## TO SEE ALL THE DATABASES

USE --> show dbs

## for mongodb --->

there is an ODM (mongoose)

`what is mongodb compass`

`GIHUB LINK OF THE MONGODB `

```link


```

Mongodb uses `JSON` like `syntax` with optional schema to store data

`MongoDB` is a `NoSQL` database

`NoSQL` is a `non relational` database

`mongodb stores data in the form of documents`

### `COLLECTIONS` in `mongodb` are similar to `tables` in `SQL`

`ORM` ---> OBJECT RELATION MAPPER (NOT FOR MONGODB)

BUT

`ODM` ---> OBJECT MODELING MAPPER

`DataBase only created in case of mongodb if you are passing some collections to it`

what is `Schema` in `mongodb`?

`Schema` is a `JSON` object which defines the `structure` of the `document` in the `collection`

### Defining `Schema` in `mongodb`

```javascript
const mongoose = require("mongoose");
const { Schema } = mongoose;

const userSchema = new Schema({
  googleId: String,
});

mongoose.model("users", userSchema);
```

## why we are creating the model if we have Schema?

Schema is like a class and model is the actual instance of it .

## In case of Mongodb id is automatically give by mongodb itself



## Structure of the Schema

```javascript

const userSchema = new Schema({
  googleId: String,
  credits: { type: Number, default: 0 },
});

```


```
__v is the version of the schema
__id is the id of the schema (automatically generated by mongodb)

```

#### .lean method()

When documents are queried, they are returned as Mongoose Documents by default. With the Mongoose lean() method, the documents are returned as plain objects. The only challenge here is that you are not able to use Mongoose features such as save() , virtuals, getters, etc.


### Pagination in MongoDB

he pagination is nothing but the retrieve next page by using the previous page. To faster access data, we can create the index on the collections field in MongoDB.

Syntax:


```js
db.collection_name.find () .limit (number);
```


### Virtual in Mongoose

Virtuals are document properties that you can get and set but that do not get persisted to MongoDB. The getters are useful for formatting or combining fields, while setters are useful for de-composing a single value into multiple values for storage.


## what are the types of the virtuals?

`virtuals` are of two types

1. `getters`
2. `setters`

### syntax of the virtuals

```js

schema.virtual('fullName').get(function () {
  return this.name.first + ' ' + this.name.last;
});

```

### what are the triggers ?

`triggers` are the `events` which are `fired` when `some action` is `performed` on the `database`

### what are the types of the triggers?

`triggers` are of two types

1. `pre` triggers
2. `post` triggers


## In Mongoose we have middleware

`Pre middleware` functions are executed one after another, when each middleware calls next.

Syntax:

```js


schema.pre('save', function(next) {
  // do stuff
  next();
});

```
In Mongoose 5.x instead of calling next() manually, you can use a function that returns a promise. In particular, you can use async/await.

```js

schema.pre('save', async function() {
  await doStuff();
  await doMoreStuff();
});

```


## Post middleware

Post middleware functions are executed after the hooked method and all of its pre middleware have completed.

```js

schema.post('save', function(doc, next) {
  // do stuff
  next();
});

```

## INDEXES in Mongodb 

indexing strategies 

if you want to use some value as an index then you just have to pass and option as object {index:true}

there is different index in the MongoDB

`It will not matter that much in the personal level Project`


## String validation mongoose Schema




## Indexes in Mongoose 

Indexes are special data structures, that store a small portion of the data set in an easy-to-traverse form. The index stores the value of a specific field or set of fields, ordered by the value of the field. The ordering of the index entries supports efficient equality matches and range-based query operations. In addition, MongoDB can return sorted results by using the ordering in the index.


## What is Agregation pipeline in MongoDB

Aggregation operations process data records and return computed results. Aggregation operations group values from multiple documents together, and can perform a variety of operations on the grouped data to return a single result. MongoDB provides three ways to perform aggregation: the aggregation pipeline, the map-reduce function, and single purpose aggregation methods.


`Function to bulk create in the mongoose`

insertMany

## filter command in the mongoose 

